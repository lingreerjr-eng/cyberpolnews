<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBERPOL | Global Political Feed</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Three.js for 3D Background -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Inter Font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #050a15;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        /* 3D Canvas Styling */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.6;
        }

        /* Main content must be on top of the canvas */
        .content-wrapper {
            position: relative;
            z-index: 10;
        }

        /* Neon / Glow Effects */
        .neon-text-cyan {
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.7), 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .neon-text-red {
            text-shadow: 0 0 5px rgba(255, 0, 0, 0.7), 0 0 10px rgba(255, 0, 0, 0.5);
        }
        
        .neon-text-green {
            text-shadow: 0 0 5px rgba(0, 255, 0, 0.7), 0 0 10px rgba(0, 255, 0, 0.5);
        }

        .neon-text-yellow {
            text-shadow: 0 0 5px rgba(255, 255, 0, 0.7), 0 0 10px rgba(255, 255, 0, 0.5);
        }
        
        .neon-border-cyan {
            border-color: #0ff;
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.5), inset 0 0 8px rgba(0, 255, 255, 0.3);
        }

        /* Active Tab Styling */
        .tab-active {
            background-color: rgba(0, 255, 255, 0.1);
            border-bottom-color: #0ff;
            color: #0ff;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.7);
        }

        /* News Article Animation */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .news-article-animation {
            animation: slideIn 0.5s ease-out;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #050a15;
        }
        ::-webkit-scrollbar-thumb {
            background: #0ff;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #0cc;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- 3D Background Canvas -->
    <canvas id="bg-canvas"></canvas>

    <!-- Main Content Wrapper -->
    <div class="content-wrapper min-h-screen flex flex-col">

        <!-- Header -->
        <header class="bg-black/30 backdrop-blur-md border-b border-cyan-500/30 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <!-- Logo -->
                    <div>
                        <h1 class="text-3xl font-extrabold tracking-wider neon-text-cyan">CYBERPOL</h1>
                        <p class="text-sm text-cyan-300 opacity-80">The Future of Political Intelligence</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-12 gap-8">
                
                <!-- Navigation Tabs (Sidebar) -->
                <nav class="col-span-12 lg:col-span-3">
                    <h2 class="text-lg font-semibold text-cyan-400 mb-4">INTELLIGENCE FEEDS</h2>
                    <ul id="sidebar-nav" class="space-y-2 mb-6">
                        <li>
                            <button data-page="crypto" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üí† Crypto Tracker
                            </button>
                        </li>
                        <li>
                            <button data-page="cyber-attacks" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üéØ Cyberattack Tracker
                            </button>
                        </li>
                        <li>
                            <button data-page="cyber-news" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üõ°Ô∏è Cyber News Feed
                            </button>
                        </li>
                    </ul>

                    <h2 class="text-lg font-semibold text-cyan-400 mb-4">REGIONAL FEEDS</h2>
                    <ul id="region-tabs" class="space-y-2">
                        <li>
                            <button data-page="news" data-region="All" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all tab-active">
                                üì° Global Feed
                            </button>
                        </li>
                        <li>
                            <button data-page="news" data-region="United States" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üá∫üá∏ United States
                            </button>
                        </li>
                        <li>
                            <button data-page="news" data-region="Europe" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üá™üá∫ Europe
                            </button>
                        </li>
                        <li>
                            <button data-page="news" data-region="Asia" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üåè Asia
                            </button>
                        </li>
                        <li>
                            <button data-page="news" data-region="Middle East" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üïå Middle East
                            </button>
                        </li>
                        <li>
                            <button data-page="news" data-region="Africa" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üåç Africa
                            </button>
                        </li>
                        <li>
                            <button data-page="news" data-region="South America" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üåé South America
                            </button>
                        </li>
                        <li>
                            <button data-page="news" data-region="Oceania" class="w-full text-left px-4 py-3 rounded-lg border-2 border-transparent font-medium hover:bg-cyan-900/50 hover:border-cyan-700 transition-all">
                                üá¶üá∫ Oceania
                            </button>
                        </li>
                    </ul>
                </nav>

                <!-- Main Content Area -->
                <div class="col-span-12 lg:col-span-9">

                    <!-- News Feed Wrapper -->
                    <div id="news-feed-wrapper" class="bg-black/30 backdrop-blur-sm border-2 neon-border-cyan rounded-xl shadow-2xl">
                        <div class="flex justify-between items-center p-4 border-b border-cyan-500/30">
                            <h2 id="feed-title" class="text-2xl font-bold neon-text-cyan">üì° Global Feed</h2>
                            <div class="flex items-center space-x-2 text-sm">
                                <span class="text-cyan-300">LIVE FEED</span>
                                <span class="relative flex h-3 w-3">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                                </span>
                            </div>
                        </div>
                        
                        <!-- News articles will be injected here -->
                        <div id="news-feed-container" class="h-[70vh] overflow-y-auto p-4 flex flex-col-reverse space-y-4 space-y-reverse">
                            <!-- Mock Article Template -->
                        </div>
                    </div>

                    <!-- Crypto Tracker Wrapper (Hidden by default) -->
                    <div id="crypto-tracker-wrapper" class="hidden bg-black/30 backdrop-blur-sm border-2 neon-border-cyan rounded-xl shadow-2xl">
                        <!-- Crypto Header -->
                        <div class="flex justify-between items-center p-4 border-b border-cyan-500/30">
                            <h2 id="crypto-feed-title" class="text-2xl font-bold neon-text-cyan">üí† POLI-CRYPTO TRACKER</h2>
                            <div class="flex items-center space-x-2 text-sm">
                                <span class="text-cyan-300">LIVE TX FEED</span>
                                <span class="relative flex h-3 w-3">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                                </span>
                            </div>
                        </div>
                        
                        <!-- Crypto Content -->
                        <div class="h-[70vh] flex flex-col">
                            <!-- Notable Wallets -->
                            <div class="p-4 grid grid-cols-1 md:grid-cols-3 gap-4 border-b border-cyan-800/50">
                                <div class="bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50">
                                    <h3 class="font-semibold text-cyan-300 text-sm mb-1">Rep_Crypto_Fund (MOCK)</h3>
                                    <p class="text-xs text-gray-400">Summary: 7-day activity shows <strong>+150 ETH</strong> & <strong>-2.5M USDC</strong>. High velocity.</p>
                                </div>
                                <div class="bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50">
                                    <h3 class="font-semibold text-cyan-300 text-sm mb-1">Senator_Lummis_Vault (MOCK)</h3>
                                    <p class="text-xs text-gray-400">Summary: 30-day activity: <strong>+5 BTC</strong>. No sells detected. Low velocity (HODL).</p>
                                </div>
                                <div class="bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50">
                                    <h3 class="font-semibold text-cyan-300 text-sm mb-1">PAC_Digital_Assets (MOCK)</h3>
                                    <p class="text-xs text-gray-400">Summary: High volume in alt-coins (<strong>SOL, AVAX</strong>). Staking <strong>+5M USDC</strong>.</p>
                                </div>
                            </div>
                            
                            <!-- Live TX Feed -->
                            <div id="crypto-feed-container" class="flex-grow overflow-y-auto p-4 flex flex-col-reverse space-y-4 space-y-reverse">
                                <!-- Mock TX Template -->
                            </div>
                        </div>
                    </div>

                    <!-- Cyber Attack Tracker Wrapper (Hidden by default) -->
                    <div id="cyber-attack-wrapper" class="hidden bg-black/30 backdrop-blur-sm border-2 neon-border-cyan rounded-xl shadow-2xl">
                        <!-- Attack Header -->
                        <div class="flex justify-between items-center p-4 border-b border-cyan-500/30">
                            <h2 id="cyber-attack-title" class="text-2xl font-bold neon-text-cyan">üéØ CYBERATTACK TRACKER</h2>
                            <div class="flex items-center space-x-2 text-sm">
                                <span class="text-cyan-300">LIVE ATTACK FEED</span>
                                <span class="relative flex h-3 w-3">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span>
                                </span>
                            </div>
                        </div>
                        
                        <!-- Attack Content -->
                        <div class="h-[70vh] flex flex-col">
                            <!-- Top Monitored Threats -->
                            <div class="p-4 grid grid-cols-1 md:grid-cols-3 gap-4 border-b border-cyan-800/50">
                                <div class="bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50">
                                    <h3 class="font-semibold text-red-400 text-sm mb-1">APT_Nocturne (MOCK)</h3>
                                    <p class="text-xs text-gray-400">Activity: High. Targeting EU energy sector. Type: Phishing, Zero-Day Exploit.</p>
                                </div>
                                <div class="bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50">
                                    <h3 class="font-semibold text-yellow-400 text-sm mb-1">Lockbit_3.0_RaaS (MOCK)</h3>
                                    <p class="text-xs text-gray-400">Activity: Medium. Targeting US healthcare. Type: Ransomware.</p>
                                </div>
                                <div class="bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50">
                                    <h3 class="font-semibold text-red-400 text-sm mb-1">Global_DDoS_Botnet (MOCK)</h3>
                                    <p class="text-xs text-gray-400">Activity: High. Targeting financial services (Asia). Type: DDoS (750Gbps).</p>
                                </div>
                            </div>
                            
                            <!-- Live Attack Feed -->
                            <div id="cyber-attack-container" class="flex-grow overflow-y-auto p-4 flex flex-col-reverse space-y-4 space-y-reverse">
                                <!-- Mock Attack Template -->
                                <!-- 
                                <article class="bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50 news-article-animation">
                                    <div class="flex justify-between items-center text-sm">
                                        <span class="font-bold text-red-400 neon-text-red">DDoS</span>
                                        <span class="font-medium text-cyan-300">TARGET: US Gov Server</span>
                                    </div>
                                    <div class="flex justify-between items-center text-xs mt-1">
                                        <span class="text-gray-300">SOURCE: 185.12.33.0/24 (Botnet)</span>
                                        <span class="text-gray-400">2025-11-16T16:30:00 EST</span>
                                    </div>
                                </article>
                                -->
                            </div>
                        </div>
                    </div>

                    <!-- Cyber News Wrapper (Hidden by default) -->
                    <div id="cyber-news-wrapper" class="hidden bg-black/30 backdrop-blur-sm border-2 neon-border-cyan rounded-xl shadow-2xl">
                        <div class="flex justify-between items-center p-4 border-b border-cyan-500/30">
                            <h2 id="cyber-news-title" class="text-2xl font-bold neon-text-cyan">üõ°Ô∏è CYBER NEWS FEED</h2>
                            <div class="flex items-center space-x-2 text-sm">
                                <span class="text-cyan-300">LIVE FEED</span>
                                <span class="relative flex h-3 w-3">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-3 w-3 bg-yellow-500"></span>
                                </span>
                            </div>
                        </div>
                        
                        <!-- Cyber News articles will be injected here -->
                        <div id="cyber-news-container" class="h-[70vh] overflow-y-auto p-4 flex flex-col-reverse space-y-4 space-y-reverse">
                            <!-- Mock Cyber News Article Template -->
                        </div>
                    </div>


                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-black/30 backdrop-blur-md border-t border-cyan-500/30 mt-12 py-6">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-400 text-sm">
                <p>&copy; 2025 CYBERPOL. All rights reserved. Data feed is a MOCK simulation.</p>
                <p>This UI simulation is not connected to a live database or the Ollama API.</p>
            </div>
        </footer>

    </div>

    <!-- News Detail Modal -->
    <div id="news-modal" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
        <div class="bg-gray-900 border-2 neon-border-cyan rounded-xl shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col">
            <!-- Modal Header -->
            <div class="flex justify-between items-center p-4 border-b border-cyan-500/30">
                <h2 id="modal-title" class="text-2xl font-bold neon-text-cyan">Article Title</h2>
                <button id="modal-close-btn" class="text-cyan-400 hover:text-white transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <!-- Modal Body -->
            <div class="p-6 overflow-y-auto">
                <p id="modal-summary" class="text-gray-300 text-base leading-relaxed">Detailed summary goes here...</p>
            </div>
        </div>
    </div>


    <!-- 3D Background Script -->
    <script type_ ="module">
        let camera, scene, renderer, particles, geometry, material, group;

        function init() {
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 3000);
            camera.position.z = 1000;
            scene = new THREE.Scene();

            geometry = new THREE.BufferGeometry();
            const vertices = [];
            const particleCount = 5000;

            for (let i = 0; i < particleCount; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                vertices.push(x, y, z);
            }

            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

            material = new THREE.PointsMaterial({
                color: 0x00ffff,
                size: 1.5,
                transparent: true,
                opacity: 0.7,
                blending: THREE.AdditiveBlending
            });

            particles = new THREE.Points(geometry, material);
            scene.add(particles);

            // Add a rotating wireframe globe
            const globeGeometry = new THREE.IcosahedronGeometry(150, 3);
            const globeMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff, wireframe: true, transparent: true, opacity: 0.3 });
            const globe = new THREE.Mesh(globeGeometry, globeMaterial);

            group = new THREE.Group();
            group.add(globe);
            scene.add(group);

            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bg-canvas'), alpha: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);

            const time = Date.now() * 0.0001;
            particles.rotation.x = time * 0.25;
            particles.rotation.y = time * 0.5;
            group.rotation.y = time * 0.3;

            renderer.render(scene, camera);
        }

        init();
        animate();
        window.addEventListener('resize', onWindowResize);
    </script>

    <!-- App Logic Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const sidebarNav = document.getElementById('sidebar-nav');
            const regionTabs = document.getElementById('region-tabs');
            
            const newsFeedWrapper = document.getElementById('news-feed-wrapper');
            const feedContainer = document.getElementById('news-feed-container');
            const feedTitle = document.getElementById('feed-title');
            
            const cryptoTrackerWrapper = document.getElementById('crypto-tracker-wrapper');
            const cryptoFeedContainer = document.getElementById('crypto-feed-container');

            const cyberAttackWrapper = document.getElementById('cyber-attack-wrapper');
            const cyberAttackContainer = document.getElementById('cyber-attack-container');

            const cyberNewsWrapper = document.getElementById('cyber-news-wrapper');
            const cyberNewsContainer = document.getElementById('cyber-news-container');
            
            // Modal Elements
            const newsModal = document.getElementById('news-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalSummary = document.getElementById('modal-summary');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            let allNews = [];
            let allCryptoTx = [];
            let allCyberAttacks = [];
            let allCyberNews = [];
            let currentRegion = 'All'; // 'All', region name, 'crypto', 'cyber-attacks', 'cyber-news'
            
            let mockNewsInterval;
            let mockCryptoInterval;
            let mockAttackInterval;
            let mockCyberNewsInterval;

            const regions = [
                { name: 'United States', emoji: 'üá∫üá∏' },
                { name: 'Europe', emoji: 'üá™üá∫' },
                { name: 'Asia', emoji: 'üåè' },
                { name: 'Middle East', emoji: 'üïå' },
                { name: 'Africa', emoji: 'üåç' },
                { name: 'South America', emoji: 'üåé' },
                { name: 'Oceania', emoji: 'üá¶üá∫' }
            ];

            const mockHeadlines = [
                "New Diplomatic Talks Scheduled Between", "Economic Policy Shift Announced in", "Major Infrastructure Project Greenlit for",
                "Election Results Certified in", "New Trade Alliance Formed by", "Tech Innovation Summit Held in",
                "Environmental Accord Reached by", "Security Posture Increased in", "Cultural Festival Celebrates Heritage in"
            ];
            
            const mockSubjects = [
                "key economic partners.", "a developing nation.", "major G7 power.", "emerging market.",
                "disputed territory.", "key trade route.", "strategic border region.", "densely populated area."
            ];

            const mockCrypto = {
                wallets: ['Rep_Crypto_Fund', 'Senator_Lummis_Vault', 'PAC_Digital_Assets'],
                actions: [
                    { name: 'BUY', class: 'text-green-400 neon-text-green' }, 
                    { name: 'SELL', class: 'text-red-400 neon-text-red' },
                    { name: 'STAKE', class: 'text-cyan-400' },
                    { name: 'MOVE', class: 'text-yellow-400' }
                ],
                assets: [
                    { name: 'BTC', price: 60000 },
                    { name: 'ETH', price: 3000 },
                    { name: 'SOL', price: 150 },
                    { name: 'USDC', price: 1 }
                ]
            };

            const mockAttacks = {
                types: [
                    { name: 'DDoS', class: 'text-red-400 neon-text-red' },
                    { name: 'Ransomware', class: 'text-yellow-400 neon-text-yellow' },
                    { name: 'Phishing', class: 'text-cyan-400' },
                    { name: 'Zero-Day Exploit', class: 'text-red-400 neon-text-red' }
                ],
                sources: ['185.12.33.0/24 (Botnet)', 'APT_Nocturne', 'Lockbit_3.0_RaaS', 'Unknown (TOR Exit)'],
                targets: ['US Gov Server', 'EU Energy Grid', 'JP Financials', 'UK Healthcare', 'AUS Logistics']
            };

            const mockCyberNews = {
                headlines: [
                    "CISA Issues Alert on New", "Hacking Group 'Nocturne' Claims Responsibility for",
                    "Major Tech Firm Patches Critical", "Government Agencies Warn of Increased",
                    "New Ransomware Strain 'Lockbit 4.0' Detected in"
                ],
                subjects: [
                    "Zero-Day Vulnerability in Web Servers.", "EU Energy Grid Disruption.",
                    "Cloud Infrastructure Flaw.", "State-Sponsored Phishing Campaigns.",
                    "Wild Targeting Healthcare."
                ]
            };


            // --- Mock Backend Simulation ---
            const mockBackend = {
                generateMockNews: () => {
                    const region = regions[Math.floor(Math.random() * regions.length)];
                    const headline = mockHeadlines[Math.floor(Math.random() * mockHeadlines.length)];
                    const subject = mockSubjects[Math.floor(Math.random() * mockSubjects.length)];
                    
                    const title = `${headline} ${region.name}`;
                    const summary = `(OLLAMA MOCK SUMMARY) - Sources report on a developing situation in ${region.name} concerning ${subject} This new development could have significant implications for regional stability and international trade agreements. Analysts are closely monitoring the situation as it unfolds.`;
                    const detailedSummary = `(OLLAMA MOCK DETAILED SUMMARY) - ${summary} This report, corroborated by three independent sources, suggests a significant shift in foreign policy. Analysts at the Global Cyberpolitical Institute (GCI) predict this will lead to a 5-7% fluctuation in regional markets within the next 48 hours. The move is seen as a direct response to last week's trade negotiations, which reportedly stalled over data sovereignty disputes. A spokesperson for the ministry is expected to deliver a formal statement by 18:00 GMT. Additional unconfirmed reports indicate that diplomatic channels are actively working to de-escalate potential trade conflicts.`;
                    
                    const newArticle = {
                        id: Date.now(),
                        title: title,
                        summary: summary,
                        detailedSummary: detailedSummary,
                        region: region.name,
                        emoji: region.emoji,
                        timestamp: new Date().toISOString()
                    };
                    
                    allNews.push(newArticle);
                    if (currentRegion === 'All' || currentRegion === newArticle.region) {
                        addArticleToDOM(newArticle);
                    }
                },

                generateMockCryptoTx: () => {
                    const wallet = mockCrypto.wallets[Math.floor(Math.random() * mockCrypto.wallets.length)];
                    const action = mockCrypto.actions[Math.floor(Math.random() * mockCrypto.actions.length)];
                    const asset = mockCrypto.assets[Math.floor(Math.random() * mockCrypto.assets.length)];
                    const amount = (Math.random() * (asset.name === 'BTC' ? 10 : 1000)).toFixed(asset.name === 'USDC' ? 0 : 2);
                    const value = (amount * asset.price).toLocaleString('en-US', { style: 'currency', currency: 'USD' });

                    const newTx = {
                        id: Date.now(),
                        wallet: wallet,
                        action: action,
                        asset: asset.name,
                        amount: amount,
                        value: value,
                        timestamp: new Date().toISOString()
                    };

                    allCryptoTx.push(newTx);
                    if (currentRegion === 'crypto') {
                        addCryptoTxToDOM(newTx);
                    }
                },

                generateMockCyberAttack: () => {
                    const type = mockAttacks.types[Math.floor(Math.random() * mockAttacks.types.length)];
                    const source = mockAttacks.sources[Math.floor(Math.random() * mockAttacks.sources.length)];
                    const target = mockAttacks.targets[Math.floor(Math.random() * mockAttacks.targets.length)];

                    const newAttack = {
                        id: Date.now(),
                        type: type,
                        source: source,
                        target: target,
                        timestamp: new Date().toISOString()
                    };

                    allCyberAttacks.push(newAttack);
                    if (currentRegion === 'cyber-attacks') {
                        addCyberAttackToDOM(newAttack);
                    }
                },

                generateMockCyberNews: () => {
                    const headline = mockCyberNews.headlines[Math.floor(Math.random() * mockCyberNews.headlines.length)];
                    const subject = mockCyberNews.subjects[Math.floor(Math.random() * mockCyberNews.subjects.length)];
                    const title = `${headline} ${subject}`;
                    const summary = `(OLLAMA MOCK SUMMARY) - Cybersecurity analysts are tracking a new development: ${subject} This poses a significant threat to global digital infrastructure. Security firms are urging immediate patching and heightened vigilance.`;
                    const detailedSummary = `(OLLAMA MOCK DETAILED SUMMARY) - ${summary} The vulnerability, now tracked as CVE-2025-99999, is a remote code execution (RCE) flaw in a widely used enterprise web server. The hacking group 'APT_Nocturne' has been observed exploiting this flaw in the wild, targeting the EU energy sector. CISA, in conjunction with international partners, has released an emergency directive. All organizations using the affected software are advised to apply patches immediately or take mitigation steps if patching is not possible. This is considered a critical threat with a CVSS score of 9.8.`;

                    const newCyberArticle = {
                        id: Date.now(),
                        title: title,
                        summary: summary,
                        detailedSummary: detailedSummary,
                        timestamp: new Date().toISOString()
                    };

                    allCyberNews.push(newCyberArticle);
                    if (currentRegion === 'cyber-news') {
                        addCyberNewsToDOM(newCyberArticle);
                    }
                },


                startNewsFeed: () => {
                    if (mockNewsInterval) clearInterval(mockNewsInterval);
                    mockNewsInterval = setInterval(mockBackend.generateMockNews, 3000);
                },

                startCryptoFeed: () => {
                    if (mockCryptoInterval) clearInterval(mockCryptoInterval);
                    mockCryptoInterval = setInterval(mockBackend.generateMockCryptoTx, 2500);
                },

                startAttackFeed: () => {
                    if (mockAttackInterval) clearInterval(mockAttackInterval);
                    mockAttackInterval = setInterval(mockBackend.generateMockCyberAttack, 2000);
                },

                startCyberNewsFeed: () => {
                    if (mockCyberNewsInterval) clearInterval(mockCyberNewsInterval);
                    mockCyberNewsInterval = setInterval(mockBackend.generateMockCyberNews, 3500);
                }
            };

            // --- UI Functions ---
            function addArticleToDOM(article) {
                const articleElement = document.createElement('article');
                articleElement.className = 'bg-cyan-900/30 p-4 rounded-lg border border-cyan-700/50 shadow-lg news-article-animation cursor-pointer transition-all duration-300 hover:border-cyan-400 hover:bg-cyan-900/50';
                articleElement.setAttribute('data-id', article.id);
                articleElement.setAttribute('data-type', 'political-news');
                
                articleElement.innerHTML = `
                    <h3 class="text-xl font-semibold text-cyan-300 mb-2">${article.title}</h3>
                    <p class="text-gray-300 text-sm mb-3">${article.summary}</p>
                    <div class="flex justify-between items-center text-xs">
                        <span class="font-medium text-cyan-400">REGION: ${article.emoji} ${article.region}</span>
                        <span class="text-gray-400">${new Date(article.timestamp).toLocaleString()}</span>
                    </div>
                `;
                
                feedContainer.appendChild(articleElement);
            }

            function addCryptoTxToDOM(tx) {
                const txElement = document.createElement('article');
                txElement.className = 'bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50 news-article-animation';
                
                txElement.innerHTML = `
                    <div class="flex justify-between items-center text-sm">
                        <span class="font-medium text-cyan-300">${tx.wallet}</span>
                        <span class="font-bold ${tx.action.class}">${tx.action.name}</span>
                    </div>
                    <div class="flex justify-between items-center text-xs mt-1">
                        <span class="text-gray-300"><strong>${tx.amount} ${tx.asset}</strong> (${tx.value})</span>
                        <span class="text-gray-400">${new Date(tx.timestamp).toLocaleString()}</span>
                    </div>
                `;
                
                cryptoFeedContainer.appendChild(txElement);
            }

            function addCyberAttackToDOM(attack) {
                const attackElement = document.createElement('article');
                attackElement.className = 'bg-cyan-900/30 p-3 rounded-lg border border-cyan-700/50 news-article-animation';
                
                attackElement.innerHTML = `
                    <div class="flex justify-between items-center text-sm">
                        <span class="font-bold ${attack.type.class}">${attack.type.name}</span>
                        <span class="font-medium text-cyan-300">TARGET: ${attack.target}</span>
                    </div>
                    <div class="flex justify-between items-center text-xs mt-1">
                        <span class="text-gray-300">SOURCE: ${attack.source}</span>
                        <span class="text-gray-400">${new Date(attack.timestamp).toLocaleString()}</span>
                    </div>
                `;
                
                cyberAttackContainer.appendChild(attackElement);
            }

            function addCyberNewsToDOM(article) {
                const articleElement = document.createElement('article');
                articleElement.className = 'bg-cyan-900/30 p-4 rounded-lg border border-cyan-700/50 shadow-lg news-article-animation cursor-pointer transition-all duration-300 hover:border-cyan-400 hover:bg-cyan-900/50';
                articleElement.setAttribute('data-id', article.id);
                articleElement.setAttribute('data-type', 'cyber-news');
                
                articleElement.innerHTML = `
                    <h3 class="text-xl font-semibold text-cyan-300 mb-2">${article.title}</h3>
                    <p class="text-gray-300 text-sm mb-3">${article.summary}</p>
                    <div class="flex justify-between items-center text-xs">
                        <span class="font-medium text-yellow-400">CYBER INTEL</span>
                        <span class="text-gray-400">${new Date(article.timestamp).toLocaleString()}</span>
                    </div>
                `;
                
                cyberNewsContainer.appendChild(articleElement);
            }

            function renderFullFeed() {
                feedContainer.innerHTML = ''; // Clear the feed
                
                let filteredNews;
                let title;
                let emoji;

                if (currentRegion === 'All') {
                    filteredNews = allNews;
                    title = 'Global Feed';
                    emoji = 'üì°';
                } else {
                    const regionObj = regions.find(r => r.name === currentRegion);
                    if (!regionObj) return; 
                    filteredNews = allNews.filter(article => article.region === currentRegion);
                    title = regionObj.name;
                    emoji = regionObj.emoji;
                }

                feedTitle.innerHTML = `${emoji} ${title}`;
                filteredNews.slice().reverse().forEach(addArticleToDOM);
            }

            function renderFullCryptoFeed() {
                cryptoFeedContainer.innerHTML = '';
                allCryptoTx.slice().reverse().forEach(addCryptoTxToDOM);
            }

            function renderFullCyberAttackFeed() {
                cyberAttackContainer.innerHTML = '';
                allCyberAttacks.slice().reverse().forEach(addCyberAttackToDOM);
            }

            function renderFullCyberNewsFeed() {
                cyberNewsContainer.innerHTML = '';
                allCyberNews.slice().reverse().forEach(addCyberNewsToDOM);
            }

            function hideAllWrappers() {
                newsFeedWrapper.classList.add('hidden');
                cryptoTrackerWrapper.classList.add('hidden');
                cyberAttackWrapper.classList.add('hidden');
                cyberNewsWrapper.classList.add('hidden');
            }

            // --- Page & Tab Switching Logic ---
            function handleSidebarClick(e) {
                const button = e.target.closest('button');
                if (!button) return;

                const page = button.dataset.page;
                const region = button.dataset.region;

                // Update active tab style
                document.querySelectorAll('#sidebar-nav button, #region-tabs button').forEach(btn => {
                    btn.classList.remove('tab-active');
                });
                button.classList.add('tab-active');

                hideAllWrappers();

                switch (page) {
                    case 'crypto':
                        currentRegion = 'crypto';
                        cryptoTrackerWrapper.classList.remove('hidden');
                        renderFullCryptoFeed();
                        break;
                    case 'cyber-attacks':
                        currentRegion = 'cyber-attacks';
                        cyberAttackWrapper.classList.remove('hidden');
                        renderFullCyberAttackFeed();
                        break;
                    case 'cyber-news':
                        currentRegion = 'cyber-news';
                        cyberNewsWrapper.classList.remove('hidden');
                        renderFullCyberNewsFeed();
                        break;
                    case 'news':
                        currentRegion = region;
                        newsFeedWrapper.classList.remove('hidden');
                        renderFullFeed();
                        break;
                }
            }


            // --- Modal Open/Close Logic ---
            function openModal(article) {
                if (!article) return;
                modalTitle.textContent = article.title;
                modalSummary.textContent = article.detailedSummary;
                newsModal.classList.remove('hidden');
            }

            function closeModal() {
                newsModal.classList.add('hidden');
            }

            // --- Event Listeners ---
            sidebarNav.addEventListener('click', handleSidebarClick);
            regionTabs.addEventListener('click', handleSidebarClick);
            
            function handleArticleClick(e, sourceArray) {
                const articleElement = e.target.closest('article');
                if (!articleElement) return;
                
                const articleId = articleElement.getAttribute('data-id');
                const articleData = sourceArray.find(item => item.id == articleId);
                
                openModal(articleData);
            }

            // Event delegation for opening POLITICAL NEWS modal
            feedContainer.addEventListener('click', (e) => {
                handleArticleClick(e, allNews);
            });

            // Event delegation for opening CYBER NEWS modal
            cyberNewsContainer.addEventListener('click', (e) => {
                handleArticleClick(e, allCyberNews);
            });


            // Close modal listeners
            modalCloseBtn.addEventListener('click', closeModal);
            newsModal.addEventListener('click', (e) => {
                if (e.target === newsModal) {
                    closeModal();
                }
            });


            // --- Initialization ---
            mockBackend.startNewsFeed();
            mockBackend.startCryptoFeed();
            mockBackend.startAttackFeed();
            mockBackend.startCyberNewsFeed();
        });
    </script>
</body>
</html>
